{% extends "base.html" %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/introduction.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">

{% endblock %}

{% block content %}
<div class="container">
  <!-- Top row with title and home icon -->
  <div class="intro-header-row">
    <div class="home-icon-container">
      <a href="{{ url_for('recipes') }}" class="recipes-button">Recipes</a>
    </div>
    <h1 class="pixel-font intro-title">Caf√©Craft</h1>
    <div class="home-icon-container">
      <!-- Empty space to balance layout -->
    </div>
  </div>

  <!-- Three column layout for main content -->
  <div class="intro-content">
    <!-- User Column (Left) -->
    <div class="character-column">
      <img src="{{ url_for('static', filename='images/user_tired.png') }}" alt="User" class="character-portrait">
      <div class="pixel-font character-name">{{ name }}</div>
      
      <!-- Coffee Level -->
      <div class="coffee-level mb-2">
        {% for i in range(6) %}
          {% if i < caffeine_level %}
            <img src="{{ url_for('static', filename='images/coffee_beans.png') }}" alt="Filled Bean" title="Filled Bean" class="coffee-bean">
          {% else %}
            <img src="{{ url_for('static', filename='images/coffee_beans.png') }}" alt="Empty Bean" title="Empty Bean" class="coffee-bean bean-empty">
          {% endif %}
        {% endfor %}
      </div>
      
      <!-- Backpack -->
      <div class="backpack">
        <div class="pixel-font backpack-title text-center">BACKPACK</div>
        <div class="backpack-grid">
          {% for i in range(8) %}
            <div class="backpack-slot"></div>
          {% endfor %}
        </div>
      </div>
    </div>
    
    <!-- Recipe Info Column (Middle) -->
    <div class="crafting-column">
      <div class="pixel-font crafting-title">{{ recipe.name }}</div>
      <div class="recipe-info">
        <div class="learn-recipe-item">
          <div class="recipe-row justify-content-center">
            <div class="recipe-ingredients">
              <div class="ingredient-icons">
                {% for ingredient in recipe.ingredients %}
                <div class="d-flex flex-column align-items-center">
                  <img src="{{ url_for('static', filename='images/' + ingredient + '.png') }}"
                      alt="{{ items[ingredient].name }}" title="{{ items[ingredient].name }}" class="learn-ingredient-icon">
                  <span class="ingredient-name">{{ items[ingredient].name }}</span>
                </div>
                {% if not loop.last %}
                <span class="plus d-flex align-items-center">+</span>
                {% endif %}
                {% endfor %}
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- Dr. Coffee Column (Right) -->
    <div class="character-column">
      <img src="{{ url_for('static', filename='images/dr_coffee.png') }}" alt="Dr. Coffee" class="character-portrait">
      <div class="pixel-font character-name">Dr. Coffee</div>
      
      <!-- Description paragraphs -->
      <div class="description-container justify-content-center">
        {% for desc in recipe.description %}
        <div class="description-slide justify-content-center" data-index="{{ loop.index0 }}">
          <div class="recipe-description pixel-font">{{ desc }}</div>
          {% if not loop.last %}
          <button class="continue-btn">Continue</button>
          {% endif %}
        </div>
        {% endfor %}
      </div>

      <!-- Start Crafting Button -->
      <div class="start-crafting-btn">
        <a href="{{ url_for('craft', recipe_id=recipe_id) }}" class="continue-button">Start Crafting!</a>
      </div>
    </div>
  </div>
</div>
{% endblock %}